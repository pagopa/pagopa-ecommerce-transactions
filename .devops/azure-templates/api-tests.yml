parameters:
  # Required
  - name: "ENV_FILE"
    type: string


steps:
  - script: |
      yarn global add newman
    displayName: 'Newman installation'
  - script: |
      newman run api-tests/checkout-tests/checkout-for-ecommerce-api.tests.json -e $(ENV_FILE) --ignore-redirects --reporters cli,junit --reporter-junit-export Results/api-TEST.xml
    displayName: 'Run api test uat app'
    continueOnError: true
  - task: PublishTestResults@2
      inputs:
        testResultsFormat: 'JUnit'
        testResultsFiles: '**/*-TEST.xml'
        searchFolder: '$(System.DefaultWorkingDirectory)'